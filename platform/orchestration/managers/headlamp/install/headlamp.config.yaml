kind: Deployment
apiVersion: apps/v1
metadata:
  name: my-headlamp
  namespace: kube-system
  uid: 4d05e0a0-d229-4b1e-80af-eebd6a12c415
  resourceVersion: '1339374'
  generation: 10
  creationTimestamp: '2025-10-28T17:26:49Z'
  labels:
    app.kubernetes.io/instance: my-headlamp
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: headlamp
    app.kubernetes.io/version: 0.36.0
    helm.sh/chart: headlamp-0.36.0
  annotations:
    deployment.kubernetes.io/revision: '10'
    meta.helm.sh/release-name: my-headlamp
    meta.helm.sh/release-namespace: kube-system
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: my-headlamp
      app.kubernetes.io/name: headlamp
  template:
    metadata:
      creationTimestamp: null
      labels:
        app.kubernetes.io/instance: my-headlamp
        app.kubernetes.io/name: headlamp
      annotations:
        kubectl.kubernetes.io/restartedAt: '2025-10-29T10:03:56Z'
    spec:
      volumes:
        - name: headlamp-plugins
          emptyDir: {}
      initContainers:
        - name: headlamp-cert-manager-plugin
          image: ghcr.io/headlamp-k8s/headlamp-plugin-cert-manager:latest
          command:
            - /bin/sh
            - '-c'
            - >-
              mkdir -p /build/plugins && cp -r /plugins/* /build/plugins/ &&
              chown -R 100:101 /build
          resources: {}
          volumeMounts:
            - name: headlamp-plugins
              mountPath: /build/plugins
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
            runAsGroup: 0
            runAsNonRoot: false
      containers:
        - name: headlamp
          image: ghcr.io/headlamp-k8s/headlamp:v0.36.0
          args:
            - '-in-cluster'
            - '-plugins-dir=/build/plugins'
          ports:
            - name: http
              containerPort: 4466
              protocol: TCP
          resources: {}
          volumeMounts:
            - name: headlamp-plugins
              mountPath: /build/plugins
          livenessProbe:
            httpGet:
              path: /
              port: http
              scheme: HTTP
            timeoutSeconds: 1
            periodSeconds: 10
            successThreshold: 1
            failureThreshold: 3
          readinessProbe:
            httpGet:
              path: /
              port: http
              scheme: HTTP
            timeoutSeconds: 1
            periodSeconds: 10
            successThreshold: 1
            failureThreshold: 3
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          imagePullPolicy: IfNotPresent
          securityContext:
            privileged: false
            runAsUser: 100
            runAsGroup: 101
            runAsNonRoot: true
      restartPolicy: Always
      terminationGracePeriodSeconds: 30
      dnsPolicy: ClusterFirst
      serviceAccountName: my-headlamp
      serviceAccount: my-headlamp
      automountServiceAccountToken: true
      securityContext: {}
      schedulerName: default-scheduler
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 25%
      maxSurge: 25%
  revisionHistoryLimit: 10
  progressDeadlineSeconds: 600
status:
  observedGeneration: 10
  replicas: 1
  updatedReplicas: 1
  readyReplicas: 1
  availableReplicas: 1
  conditions:
    - type: Available
      status: 'True'
      lastUpdateTime: '2025-10-28T17:29:25Z'
      lastTransitionTime: '2025-10-28T17:29:25Z'
      reason: MinimumReplicasAvailable
      message: Deployment has minimum availability.
    - type: Progressing
      status: 'True'
      lastUpdateTime: '2025-10-29T11:22:49Z'
      lastTransitionTime: '2025-10-29T11:05:30Z'
      reason: NewReplicaSetAvailable
      message: ReplicaSet "my-headlamp-65b5597984" has successfully progressed.
